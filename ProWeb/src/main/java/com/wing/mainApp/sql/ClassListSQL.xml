<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="clist">
	<!-- 총 데이터 수 구하기 -->
	<select id="gettotal" resultType="java.lang.Integer">
		SELECT
			COUNT(*) AS TOTAL
		FROM
			class
	</select>
	<!-- 게시물 등록 -->
	<insert id="classinsert" parameterType="ClassListData">
		INSERT
		INTO
			class
		VALUES
			((SELECT NVL(MAX(no), 0) + 1 FROM class),#{title},#{body},'N')
	</insert>
	<!-- 목록보기 -->
	<select id="getlist" resultType="ClassListData">
		SELECT
			CLASS_no		AS no,
			CLASS_title	AS title,
			CLASS_body	AS body
		FROM
			class
		ORDER BY
			no DESC
	</select>
	<!-- 상세보기 -->
	<select id="classview" resultType="ClassListData" parameterType="java.lang.Integer">
		SELECT
			CLASS_no 	AS no,
			CLASS_title	AS title,
			CLASS_body	AS body
		FROM
			class
		WHERE
			CLASS_no = #{NO}
	</select>
	<!-- 수정 삭제 -->
	<select id="isupdate" resultType="java.lang.Integer" parameterType="Hmap">
		SELECT
			COUNT(*) AS CNT
		FROM
			class
		WHERE
			CLASS_no = #{NO}
	</select>
	<!-- 수정 질의 -->
	<update id="updateclass" parameterType="ClassListData">
		UPDATE
			class
		SET
			CLASS_title = #{title},
			CLASS_body = #{body},
			CLASS_date = SYSDATE
		WHERE
			CLASS_no = #{NO}
	</update>
	<!-- 삭제 질의 -->
	<update id="deleteclass"	parameterType="java.lang.Integer">
		UPDATE
			class
		SET
			CLASS_isDeleted = 'N'
		WHERE
			CLASS_no = #{NO}
	</update>
</mapper>